  <div class="post-container" style="background-color: #343541">
  <div class="post" >

        <div class="mb-3 mt-3" data-controller="tabs">
              <div class="tabs" >
                <a href="/posts/" class="tab">Explore</a>
                <a href="" class="tab active" data-tabs-target="tab" data-action="click->tabs#changeTab">Story</a>
                <a href="" class="tab" data-tabs-target="tab" data-action="click->tabs#changeTab">Reviews</a>
                <a href="" class="tab" data-tabs-target="tab" data-action="click->tabs#changeTab">Author</a>
              </div>

              <div class="notifications">
              <!-- story -->
                  <div class="notification story" data-tabs-target="notification">
                          <h1 class="title"> <%= @post.title %></h1>
                          <div class="show-date"><%= @post.created_at.strftime("%-d %B %Y") %></div>
                          <div class="d-flex align-items-center mb-3">
                            <h3 class="post-avatar"> <%= cl_image_tag @post.user.photo.key, class: "avatar-small" %></h3>
                            <p style="margin-left: 16px"> by <%= @post.user.nickname %> </p>
                            <div>
                              <% if user_signed_in? %>
                                <% user_follow = current_user.following?(User.find(@post.user_id)) %>
                                <% if user_follow %>
                                  <p><%= button_to "Following ✔", unfollow_follower_path(User.find(@post.user_id)), class: "btn btn-following", method: :post %></p>
                                <% else %>
                                  <p><%= button_to "Follow", follow_follower_path(User.find(@post.user_id)), class: "btn btn-follow", method: :post %></p>
                                <% end %>
                              <% end %>
                            </div>
                          </div>

                          <!--categories-->
                          <div class="category">
                            <% @post.categories.each do |category| %>
                              <p><%= category.name %></p>
                            <% end %>
                          </div>
                          <!--like, quality buttons-->
                          <div class="d-flex justify-content-center mb-5">
                            <div>
                              <% if user_signed_in? %>
                                <% post_like = current_user.post_likes.find_by(post: @post) %>
                                <% if post_like.nil? %>
                                  <%= button_to "🤍", post_likes_path, class: "btn btn-like", params: { post_like: { post_id: @post.id }}, method: :post %>
                                <% else %>
                                  <%= button_to "💖", post_like_path(post_like), class: "btn btn-like", method: :delete %>
                                <% end %>
                              <% end %>
                              <p><%= @post.post_likes.count %> Likes</p>
                            </div>
                            <div>
                              <% if user_signed_in? %>
                                <% post_quality = current_user.post_qualities.find_by(post: @post) %>
                                <% if post_quality.nil? %>
                                  <%= button_to "✨", post_qualities_path, class: "btn btn-like", params: { post_quality: { post_id: @post.id }}, method: :post %>
                                <% else %>
                                  <%= button_to "✨", post_quality_path(post_quality), class: "btn btn-like", method: :delete %>
                                <% end %>
                              <% end %>
                              <p><%= @post.post_qualities.count %> Quality</p>
                            </div>
                            <div>
                              <% if user_signed_in? %>
                                <% saved_for_later = current_user.saved_for_laters.find_by(post: @post) %>
                                <% if saved_for_later.nil? %>
                                  <%= button_to "🕔", saved_for_laters_path, class: "btn btn-like", params: { saved_for_later: { post_id: @post.id }}, method: :post %>
                                  <p>Save for later</p>
                                <% else %>
                                  <%= button_to "🕔", saved_for_later_path(saved_for_later), class: "btn btn-like", method: :delete %>
                                  <p>✅ Saved for later</p>
                                <% end %>
                              <% end %>
                            </div>
                          </div>


                          <p class="show-content"><%= @post.content.gsub(/\n/, '<br>').html_safe %></p>
                  </div>

              <!-- reviews -->
                  <div class="notification reviews d-none" data-tabs-target="notification">


                              <!--comments-->
                              <div class="form-group">
                                <div class="text">
                                  <h3 style="color: black">Reviews (<%= @post.comments.count %>)</h3>
                                  <%= simple_form_for [@post, @comment] do |f| %>
                                    <%= f.input :content, class: "form-control", placeholder: "Type your review here...", label: false %>
                                    <%= f.submit "Submit", class: "btn btn-flat show-comment-btn" %>
                                  <% end %>
                                  <% @post.comments.reverse.each do |comment|%>
                                    <div class="comment">
                                      <div class="d-flex justify-content-center mb-5">
                                          <%= render partial: "user_avatar", locals: { user_id: comment.user_id } %>
                                          <p><%= comment.content %></p>
                                          <!--comment likes-->
                                          <div>
                                            <% if user_signed_in? %>
                                              <% comment_like = current_user.comment_likes.find_by(comment: comment) %>
                                              <% if comment_like.nil? %>
                                                <%= button_to "⬆", comment_likes_path, class: "btn btn-like", params: { comment_like: { comment_id: comment.id }}, method: :post %>
                                              <% else %>
                                                <%= button_to "⬆", comment_like_path(comment_like), class: "btn btn-like", method: :delete %>
                                              <% end %>
                                            <% end %>
                                            <% if comment.nil? %>
                                              <p>0</p>
                                            <% else %>
                                              <p><%= comment.comment_likes.count %></p>
                                            <% end %>
                                          </div>
                                          <!--comment dislikes-->
                                          <div>
                                            <% if user_signed_in? %>
                                              <% comment_dislike = current_user.comment_dislikes.find_by(comment: comment) %>
                                              <% if comment_dislike.nil? %>
                                                <%= button_to "⬇", comment_dislikes_path, class: "btn btn-like", params: { comment_dislike: { comment_id: comment.id }}, method: :post %>
                                              <% else %>
                                                <%= button_to "⬇", comment_dislike_path(comment_dislike), class: "btn btn-like", method: :delete %>
                                              <% end %>
                                            <% end %>
                                            <% if comment.nil? %>
                                              <p>0</p>
                                            <% else %>
                                              <p><%= comment.comment_dislikes.count %></p>
                                            <% end %>
                                          </div>
                                      </div>


                                      <!-- Comment Replies -->
                                      <% if comment.comment_replies.any? %>
                                      <div class="replies">
                                        <% comment.comment_replies.reverse.each do |comment_reply|%>
                                          <div class="reply">
                                            <div class="d-flex justify-content-center mb-5">
                                                <%= render partial: "user_avatar", locals: { user_id: comment_reply.user_id } %>
                                                <p><%= comment_reply.content %></p>
                                                <!--comment reply likes-->
                                                <div>
                                                  <% if user_signed_in? %>
                                                    <% comment_reply_like = current_user.comment_reply_likes.find_by(comment_reply: comment_reply) %>
                                                    <% if comment_reply_like.nil? %>
                                                      <%= button_to "🤍", comment_reply_likes_path, class: "btn btn-like", params: { comment_reply_like: { comment_reply_id: comment_reply.id }}, method: :post %>
                                                    <% else %>
                                                      <%= button_to "💖", comment_reply_like_path(comment_reply_like), class: "btn btn-like", method: :delete %>
                                                    <% end %>
                                                  <% end %>
                                                  <% if comment_reply.nil? %>
                                                    <p>0</p>
                                                  <% else %>
                                                    <p><%= comment_reply.comment_reply_likes.count %></p>
                                                  <% end %>
                                                </div>
                                            </div>
                                          </div>
                                        <% end %>
                                      </div>
                                      <% end %>
                                      <%= simple_form_for [comment, CommentReply.new] do |f| %>
                                        <%= f.input :content, class: "form-control", placeholder: "Type your reply here...", label: false %>
                                        <%= f.submit "Submit", class: "btn btn-flat show-comment-reply-btn" %>
                                      <% end %>
                                    </div>
                                  <% end %>
                                </div>
                              </div>

                  </div>

              <!-- author -->
                  <div class="notification author d-none" data-tabs-target="notification">
                            <div class="profile">
                                    <div  class="mb-2"><%= render partial: "user_avatar", locals: { user_id: @post.user_id } %></div>
                                    <div class="d-flex justify-content-center">
                                          <p  class="mb-2"><%= @post.user.nickname %></p>
                                          <div>
                                            <% if user_signed_in? %>
                                              <% user_follow = current_user.following?(User.find(@post.user_id)) %>
                                              <% if user_follow %>
                                                <p><%= button_to "Following ✔", unfollow_follower_path(User.find(@post.user_id)), class: "btn btn-following", method: :post %></p>
                                              <% else %>
                                                <p><%= button_to "Follow", follow_follower_path(User.find(@post.user_id)), class: "btn btn-follow", method: :post %></p>
                                              <% end %>
                                            <% end %>
                                          </div>
                                    </div>
                                      <div class="d-flex justify-content-center">
                                        <p  class="mb-5", style="margin-right: 30px"><%= @post.user.posts.count %> Stories</p>
                                        <p  class="mb-5"><%= @post.user.followers_count %> Followers</p>
                                      </div>
                            </div>

                            <!-- official site -->
                            <a href=<%= @post.url %> target= "_blank">Official site🔗</a>
                            <p>More stories from <%= @post.user.nickname %></p>
                            <div class="cards">
                                <% @post.user.posts.each do |post| %>
                                <%= link_to post_path(post)  do %>
                                    <div  class="post-card-small">
                                      <h4 class="like"><i class="fa-solid fa-heart" style="color: #FF3040;"></i> <%= post.post_likes.count %></h4>
                                      <h4 class="quality"><i class="fa-solid fa-star" style="color: #ffd43b;"></i> <%= post.post_qualities.count %></h4>
                                      <h5 class="language"><%= post.language %> from </h5>
                                      <% if post.language == "English" %>
                                        <div class= "england-flag"></div>
                                      <% elsif post.language == "French" %>
                                        <div class= "france-flag"></div>
                                      <% elsif post.language == "Spanish" %>
                                        <div class= "spain-flag"></div>
                                      <% end %>
                                      <div class="infos">
                                        <h3 class="post-avatar"> <%= cl_image_tag post.user.photo.key, class: "avatar-small" %></h3>
                                        <% if post.photo.key.nil? %>
                                            <h3 class="post-image"> <%= image_tag "default_image.png", class: "avatar-post" %></h3>
                                            <% else %>
                                            <h3 class="post-image"> <%= cl_image_tag post.photo.key, class: "avatar-post" %></h3>
                                        <% end %>
                                        <h2 class="title"><%=post.title%></h2>
                                        <h3 class="nickname"> By <%=post.user.nickname%></h3>
                                        <h3 class="nickname"><i class="fa-solid fa-badge-check" style="color: #ffffff;"></i></h3>
                                        <h3 class="date"><%= post.created_at.strftime("%-d %B %Y") %></h3>
                                        <p class="content"><%= post.content %></p>
                                      </div>
                                    </div>
                                <%end%>
                                <%end%>
                            </div>

                  </div>
              </div>
        </div>
  </div>
  </div>
