<div class="post">
  <!--search-bar-->
  <%= render partial: "shared/search_bar" %>
    <div class="profile" style="color:white;">
      <div  class="mb-2" style="margin-top: 30px">
        <%= link_to "#profileImageModal", "data-bs-toggle" => "modal", "data-bs-target" => "#profileImageModal" do %>
          <%= image_tag url_for(@user.photo), class: "avatar-large", loading: "lazy" %>
        <% end %>
      </div>
      <div class="d-flex justify-content-center align-items-center mb-5" style="gap: 10px; color:white;" >
        <h2><%= @user.nickname %></h2>
        <div style="color:white;">
          <% if user_signed_in? && current_user.id != @user.id %>
            <turbo-frame id="follow_button_<%= @user.id %>">
              <% user_follow = current_user.following?(@user) %>
              <% if user_follow %>
                <h2 class = "d-flex align-items-center"><%= button_to "Following âœ”", unfollow_follower_path(@user), class: "btn btn-mini-following", method: :post, remote: true %></h2>
              <% else %>
                <h2 class = "d-flex align-items-center"><%= button_to "Follow", follow_follower_path(@user), class: "btn btn-mini-follow", method: :post, remote: true %></h2>
              <% end %>
            </turbo-frame>
          <% end %>
        </div>
      </div>
      <div class="d-flex justify-content-center" style="color:white;">
        <h6  class="mb-5", style="margin-right: 30px"><%= @user.posts.count %> Posts</h6>
        <h6  class="mb-5"><%= @user.followers_count %> Followers</h6>
        <h6  class="mb-5", style="margin-left: 30px"><%= @user.follow_count %> Following</h6>
      </div>
    </div>
    <div class="cards">
      <% @user.posts.each do |post| %>
        <%= link_to post_path(post.token)  do %>
          <!--cards-->
          <%= render partial: "posts/card", locals: { post: post }%>
        <% end %>
      <% end %>
    </div>
</div>

<!-- Profile Image Modal -->
<div class="modal fade" id="profileImageModal" tabindex="-1" aria-hidden="true">
  <div class="modal-dialog modal-dialog-centered">
    <div class="modal-content bg-transparent border-0">
      <div class="modal-body d-flex align-items-center justify-content-center p-0">
          <%= image_tag url_for(@user.photo), loading: "lazy" %>
      </div>
    </div>
  </div>
</div>
